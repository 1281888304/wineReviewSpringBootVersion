
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Register</title>
</head>
<body>
<h2 align="center">New User Register</h2>
<hr width="40%" color="gray"/>
<form action="/doregister" method="post" enctype="application/x-www-form-urlencoded">
  <table width="40%" bgcolor="gray" align="center">
    <tr>
      <td align="right">Username：</td>
      <td>
        <input type="text"  id="username" name="username" onblur="check()" size="25px" maxlength="10" placeholder="Userame"  required/>
        <span id="errorMsg" style="color:red"></span>
      </td>
    </tr>
    <tr>
      <td align="right">Password：</td>
      <td>
        <input type="password" name="password" size="25px" maxlength="20" placeholder="Password" required>
      </td>
    </tr>
    <tr>
      <td align="right">Role：</td>
      <td>
        <label>
          <select name="role">
            <option>--Select a Role--</option>
            <option th:each="role:${roles}"
                    th:value="${role.id}"
                    th:text="${role.nameZH}"
                    th:selected="${role==role.id}"></option>
          </select>
        </label>
      </td>
    </tr>
    <tr>
      <td align="right">
        <input type="submit"  value="submit">
      </td>
      <td>
      </td>
    </tr>
  </table>
</form>

<script src="js/jquery.min.js"></script>
<script>
  function checkUname(){
    // 获取输入框中的内容
    if(null == $("#username").val() || '' == $("#username").val()){
      $("#unameInfo").text("用户名不能为空");
      return;
    }
    $("#unameInfo").text("");
    // 通过jQuery.ajax() 发送异步请求
    $.ajax(
        {
          type:"GET",// 请求的方式 GET  POST
          url:"check/", // 请求的后台服务的路径
          data:"uname="+$("#username").val(),// 提交的参数
          success:function(info){ // 响应成功执行的函数
            $("#unameInfo").text(info)
          }
        }
    )
  }
</script>


<!--jQuery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!--ajax-->


<script>

  function check(){
    $.post({
      url:"/check",
      data:{'username':$("#username").val()},
      success:function (data) {
        if (data.toString()=='OK'){
          $("#username").css("color","green");
        }else {
          $("#username").css("color","red");
        }
        $("#errorMsg").html(data);
      }
    });
  }







</script>

</body>
